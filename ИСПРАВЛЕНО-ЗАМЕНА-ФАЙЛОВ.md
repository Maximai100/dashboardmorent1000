# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –§–∞–π–ª—ã –∑–∞–º–µ–Ω—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É, –æ–Ω –∑–∞–º–µ–Ω—è–ª –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ñ–∞–π–ª—ã –≤ Directus.

## –ü—Ä–∏—á–∏–Ω–∞
Directus –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ M2M —Å–≤—è–∑–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
- –ï—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–∞—Å—Å–∏–≤ attachments —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –æ–Ω **—É–¥–∞–ª—è–µ—Ç –≤—Å–µ —Å—Ç–∞—Ä—ã–µ** –∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ
- –ù—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å, –∫–∞–∫–∏–µ –∑–∞–ø–∏—Å–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –∫–∞–∫–∏–µ –¥–æ–±–∞–≤–∏—Ç—å, –∫–∞–∫–∏–µ —É–¥–∞–ª–∏—Ç—å

## –†–µ—à–µ–Ω–∏–µ

### –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π):
```typescript
attachments: [
  { id: 33, directus_files_id: "file-1" },  // Directus –¥—É–º–∞–µ—Ç: –æ–±–Ω–æ–≤–∏—Ç—å
  { directus_files_id: "file-2" }           // Directus –¥—É–º–∞–µ—Ç: —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
]
// –†–µ–∑—É–ª—å—Ç–∞—Ç: —É–¥–∞–ª—è—é—Ç—Å—è –í–°–ï —Å—Ç–∞—Ä—ã–µ, —Å–æ–∑–¥–∞—é—Ç—Å—è 2 –Ω–æ–≤—ã—Ö
```

### –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π):
```typescript
attachments: [
  { id: 33 },                               // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
  { 
    projects_id: 20,
    directus_files_id: "file-2",           // –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
    title: "–Ω–∞–∑–≤–∞–Ω–∏–µ"
  }
]
// –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è #33, —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π
```

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### ProjectDetailModal.tsx - handleSaveChanges

**–ë—ã–ª–æ:**
- –û—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –≤—Å–µ attachments —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- Directus —É–¥–∞–ª—è–ª –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∏ —Å–æ–∑–¥–∞–≤–∞–ª –Ω–æ–≤—ã–µ

**–°—Ç–∞–ª–æ:**
1. **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ attachments** (id > 0):
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ `{ id: X }`
   - Directus —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

2. **–ù–æ–≤—ã–µ attachments** (id < 0):
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ë–ï–ó –ø–æ–ª—è `id`
   - –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º `projects_id`
   - Directus —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏

3. **–£–¥–∞–ª–µ–Ω–Ω—ã–µ attachments**:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º `{ id: X, _delete: true }`
   - Directus —É–¥–∞–ª—è–µ—Ç –∏—Ö

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É —Å 1 —Ñ–∞–π–ª–æ–º

**–ò—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ü—Ä–æ–µ–∫—Ç #20
- Attachment #33 (file-1)

**–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–ª—è–µ–º file-2

**–û—Ç–ø—Ä–∞–≤–ª—è–µ–º:**
```json
{
  "attachments": [
    { "id": 33 },
    { 
      "projects_id": 20,
      "directus_files_id": "file-2-id",
      "title": "file-2.pdf"
    }
  ]
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Attachment #33 —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π Attachment #34 (file-2)

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

**–ò—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- Attachment #33 (file-1)
- Attachment #34 (file-2)

**–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª—è–µ–º file-1

**–û—Ç–ø—Ä–∞–≤–ª—è–µ–º:**
```json
{
  "attachments": [
    { "id": 34 },
    { "id": 33, "_delete": true }
  ]
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Attachment #34 —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- Attachment #33 —É–¥–∞–ª–µ–Ω

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤–∏–¥–Ω–æ:

```
üìé –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π attachment: { id: 33 }
üìé –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π attachment: { projects_id: 20, directus_files_id: "...", title: "..." }
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: { projectId: "20", attachmentsCount: 2, attachments: [...] }
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å 1 —Ñ–∞–π–ª–æ–º
2. –î–æ–±–∞–≤—å—Ç–µ –µ—â–µ 1 —Ñ–∞–π–ª
3. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   - `üìé –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π attachment: { id: X }`
   - `üìé –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π attachment: { projects_id: Y, ... }`
4. –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±–∞ —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è
5. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–∞ —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è

## –°—Ç–∞—Ç—É—Å

‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ  
‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `npm run dev`
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
