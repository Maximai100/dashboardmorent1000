# –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–∞–π–ª–∞–º–∏

## –ü—Ä–æ–±–ª–µ–º–∞
–§–∞–π–ª—ã –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ Directus –∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ.

## –®–∞–≥–∏ –æ—Ç–ª–∞–¥–∫–∏

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
1. –ù–∞–∂–º–∏—Ç–µ F12
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å (Clear console)

### 2. –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª –∫ –ø—Ä–æ–µ–∫—Ç—É
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
2. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª
4. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:

```
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: {
  projectId: "20",
  attachmentsCount: 2,
  attachments: [
    { id: 33, directus_files_id: "868e7058-..." },
    { directus_files_id: "–Ω–æ–≤—ã–π-id-—Ñ–∞–π–ª–∞", title: "–∏–º—è-—Ñ–∞–π–ª–∞" }
  ]
}

üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: {
  projectId: "20",
  attachments: [...],
  payload: {...}
}
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network –∑–∞–ø—Ä–æ—Å—ã

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Network
2. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å PATCH –∫ `/items/projects/{id}`
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ:
   - **Request Payload** - —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
   - **Response** - —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Directus
   - **Status Code** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200

### 5. –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: –§–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω–æ "–ó–∞–≥—Ä—É–∑–∫–∞..." –∏ "‚úì"
- –ù–æ –≤ attachments –Ω–µ—Ç –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞

**–ü—Ä–∏—á–∏–Ω–∞:**
- –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω –≤ Directus Files
- –ù–æ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞ —Å–≤—è–∑—å –≤ junction table

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ payload –≤ Network
- –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `directus_files_id` –±–µ–∑ `id` –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: –§–∞–π–ª –∑–∞–º–µ–Ω—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π
**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞, —Å—Ç–∞—Ä—ã–π –∏—Å—á–µ–∑–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í payload –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω attachment
- –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —Ç–µ–º –∂–µ `id`

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ payload –≤—Å–µ attachments
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å `id > 0`
- –ù–æ–≤—ã–µ –ù–ï –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å `id`

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: –§–∞–π–ª –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
**–°–∏–º–ø—Ç–æ–º—ã:**
- –§–∞–π–ª –≤–∏–¥–µ–Ω —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å—á–µ–∑–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞:**
- –§–∞–π–ª –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è –≤ Directus
- –ò–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Directus Admin Panel
- –ö–æ–ª–ª–µ–∫—Ü–∏—è `projects_files`
- –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å —Å `projects_id` –∏ `directus_files_id`

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Directus

1. –û—Ç–∫—Ä–æ–π—Ç–µ Directus Admin Panel
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Content ‚Üí Projects Files
3. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - `projects_id` - ID –ø—Ä–æ–µ–∫—Ç–∞
   - `directus_files_id` - ID —Ñ–∞–π–ª–∞
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### 7. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API

```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç —Å attachments
curl "https://1.cycloscope.online/items/projects/20?fields=*,attachments.*" \
  -H "Authorization: Bearer YOUR_TOKEN"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å junction table
curl "https://1.cycloscope.online/items/projects_files?filter[projects_id][_eq]=20" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–¥–µ

### 1. handleFileSelect
```typescript
// –î–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å attachment —Å:
{
  id: Date.now() * -1,  // –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π ID
  projects_id: project.id,
  directus_files_id: uploadedFile,  // –ü–æ–ª–Ω—ã–π –æ–±—ä–µ–∫—Ç
  title: uploadedFile.title || file.name
}
```

### 2. handleSaveChanges
```typescript
// –î–ª—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ (id < 0):
{
  directus_files_id: "file-id",  // –¢–æ–ª—å–∫–æ ID, –±–µ–∑ –ø–æ–ª—è id
  title: "–Ω–∞–∑–≤–∞–Ω–∏–µ"
}

// –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ (id > 0):
{
  id: 33,  // ID junction –∑–∞–ø–∏—Å–∏
  directus_files_id: "file-id"
}
```

### 3. updateProject
```typescript
// Payload –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
{
  attachments: [
    { id: 33, directus_files_id: "existing-file-id" },
    { directus_files_id: "new-file-id", title: "new-file" }
  ]
}
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network –∑–∞–ø—Ä–æ—Å—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ Directus
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ:
   - –°–∫—Ä–∏–Ω—à–æ—Ç –∫–æ–Ω—Å–æ–ª–∏
   - –°–∫—Ä–∏–Ω—à–æ—Ç Network –∑–∞–ø—Ä–æ—Å–∞
   - –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É!
