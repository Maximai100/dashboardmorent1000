import{r as x,j as e,X as u,P as w,c as y,A as k,D,C,a as I}from"./index-D6X042aT.js";import{M as S}from"./Modal-Co6oFzsk.js";const $=["Есть","Нет","Истек","Скоро истекает"],M=({ownerName:b,documentName:m,documentData:l,onClose:h,onUpdate:p})=>{const[n,d]=x.useState(!1),[t,r]=x.useState(l);x.useEffect(()=>{r(l)},[l]);const a=s=>{const{name:o,value:i}=s.target;r(v=>({...v,[o]:i===""?void 0:i}))},g=()=>{p(t),d(!1)},j=()=>{r(l),d(!1)},f=()=>{var o;const s={id:`v${Date.now()}`,version:(((o=t.versions)==null?void 0:o.length)||0)+1,fileName:`Новый_файл_${new Date().toLocaleDateString()}.pdf`,uploadDate:new Date().toISOString().split("T")[0],fileUrl:"#"};r(i=>({...i,versions:[...i.versions||[],s]}))},N=()=>n?e.jsxs("div",{className:"flex items-center justify-end space-x-2 w-full",children:[e.jsx("button",{type:"button",onClick:j,className:"text-white bg-slate-600 hover:bg-slate-700 border border-slate-500 focus:outline-none focus:ring-4 focus:ring-slate-500 font-medium rounded-lg text-sm px-5 py-2.5",children:"Отмена"}),e.jsx("button",{type:"button",onClick:g,className:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5",children:"Сохранить"})]}):e.jsxs("div",{className:"flex items-center justify-end space-x-2 w-full",children:[e.jsx("button",{type:"button",onClick:h,className:"text-white bg-slate-600 hover:bg-slate-700 border border-slate-500 focus:outline-none focus:ring-4 focus:ring-slate-500 font-medium rounded-lg text-sm px-5 py-2.5",children:"Закрыть"}),e.jsxs("button",{type:"button",onClick:()=>d(!0),className:"inline-flex items-center gap-2 text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5",children:[e.jsx(I,{className:"w-4 h-4"}),"Редактировать"]})]}),c="bg-slate-700 border border-slate-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5";return e.jsx(S,{title:n?`Редактирование: ${m}`:`${m} / ${b}`,onClose:h,footer:N(),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-slate-200 mb-2",children:"Статус и даты"}),n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block mb-2 text-sm font-medium text-white",children:"Статус"}),e.jsx("select",{id:"status",name:"status",value:t.status,onChange:a,className:c,children:$.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signingDate",className:"block mb-2 text-sm font-medium text-white",children:"Дата подписания"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",id:"signingDate",name:"signingDate",value:t.signingDate||"",onChange:a,className:`${c} pr-8`}),t.signingDate&&e.jsx("button",{type:"button",onClick:()=>a({target:{name:"signingDate",value:""}}),className:"absolute inset-y-0 right-0 flex items-center pr-2 text-slate-400 hover:text-slate-200","aria-label":"Очистить дату подписания",children:e.jsx(u,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expirationDate",className:"block mb-2 text-sm font-medium text-white",children:"Дата окончания"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",id:"expirationDate",name:"expirationDate",value:t.expirationDate||"",onChange:a,className:`${c} pr-8`}),t.expirationDate&&e.jsx("button",{type:"button",onClick:()=>a({target:{name:"expirationDate",value:""}}),className:"absolute inset-y-0 right-0 flex items-center pr-2 text-slate-400 hover:text-slate-200","aria-label":"Очистить дату окончания",children:e.jsx(u,{className:"w-5 h-5"})})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-slate-400",children:"Статус"}),e.jsx("p",{className:"font-medium text-slate-200",children:l.status})]}),e.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:[e.jsx("label",{className:"block text-xs text-slate-400",children:"Дата подписания"}),e.jsx("p",{className:"font-medium text-slate-200",children:l.signingDate||"—"})]}),e.jsxs("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:[e.jsx("label",{className:"block text-xs text-slate-400",children:"Дата окончания"}),e.jsx("p",{className:"font-medium text-slate-200",children:l.expirationDate||"—"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"text-md font-semibold text-slate-200",children:"Версии документа"}),n&&e.jsxs("button",{onClick:f,type:"button",className:"inline-flex items-center gap-1 text-sm font-medium text-blue-400 hover:text-blue-300",children:[e.jsx(w,{className:"w-4 h-4"}),"Добавить версию"]})]}),(t.versions||[]).length>0?e.jsx("ul",{className:"border border-slate-700 rounded-lg divide-y divide-slate-700",children:t.versions.map(s=>e.jsxs("li",{className:"p-3 flex items-center justify-between hover:bg-slate-700/50",children:[e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx(y,{className:"w-5 h-5 mr-3 text-slate-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:s.fileName}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Версия ",s.version,", загружен ",s.uploadDate]})]})]}),e.jsx("a",{href:s.fileUrl,download:!0,className:"p-2 rounded-md hover:bg-slate-600 ml-2 flex-shrink-0",children:e.jsx(k,{className:"w-5 h-5 text-slate-400"})})]},s.id))}):e.jsxs("div",{className:"text-center py-8 px-4 border-2 border-dashed border-slate-600 rounded-lg",children:[e.jsx(D,{className:"mx-auto h-10 w-10 text-slate-400"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-slate-300",children:"Файлы не загружены"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Загрузите первую версию документа."})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-slate-200 mb-2",children:"История и примечания"}),n?e.jsx("textarea",{id:"notes",name:"notes",rows:3,value:t.notes||"",onChange:a,className:c,placeholder:"Добавьте примечание..."}):l.notes?e.jsxs("div",{className:"flex items-start bg-slate-700/50 p-3 rounded-lg",children:[e.jsx(C,{className:"w-4 h-4 mr-3 mt-1 text-slate-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-slate-300 whitespace-pre-wrap",children:l.notes})]}):e.jsx("p",{className:"text-sm text-slate-400 italic",children:"Примечаний нет."})]})]})})};export{M as default};
